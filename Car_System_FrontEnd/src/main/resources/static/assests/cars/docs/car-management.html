<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Car & Package Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
    <style>

/* For light theme (when system prefers light but user has selected dark) */
/* System prefers light mode */
@media (prefers-color-scheme: light) {
    .dark\:text-gray-300 {
        --tw-text-opacity: 1;
        color: rgb(0 0 0) !important;
    }
}

/* System prefers dark mode */
@media (prefers-color-scheme: dark) {
    .dark\:text-gray-300 {
        --tw-text-opacity: 1;
        color: rgb(0, 0, 0) !important;
    }
}

/* Manual override (your existing dark mode toggle) */
.dark .dark\:text-gray-300 {
    --tw-text-opacity: 1;
    color: rgb(255 255 255) !important;
}
@media (prefers-color-scheme: dark) {
    .dark\:text-gray-400 {
        --tw-text-opacity: 1;
        color: rgb(68 69 71) !important;
    }
}
@media (prefers-color-scheme: dark) {
    .dark\:bg-gray-700 {
        --tw-bg-opacity: 1;
        background-color: rgb(96 100 107) !important;
    }
}



        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        /* Dark mode styles */
        .dark {
            background-color: #1d0a2f;
            color: #ffffff;
        }
        
        /* Main content area background in dark mode */
        .dark .flex-1 {
            background-color: #1d0a2f;
        }
        
        /* Space between cards in dark mode */
        .dark .gap-6 {
            background-color: #1d0a2f;
        }
        
        /* Card backgrounds remain black in dark mode */
        .dark .bg-white {
            background-color: #1e1e1e;
            color: #ffffff;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .dark .bg-gray-100 {
            background-color: #2d2d2d;
            color: #ffffff;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .dark .text-gray-600, 
        .dark .text-gray-700 {
            color: #b0b0b0;
            transition: color 0.3s ease;
        }
        
        .dark table,
        .dark table th,
        .dark table td {
            color: white;
            transition: color 0.3s ease;
        }
        
        .dark .border-r, 
        .dark .border-b, 
        .dark .border-t {
            border-color: #3d3d3d;
        }
        
        .dark .hover\:bg-gray-100:hover {
            background-color: #3d3d3d;
        }
        
        .dark .shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
        }
        
        /* Modal styles for dark theme */
        .dark .modal-content {
            background-color: #1e1e1e;
            color: #ffffff;
            border-color: #3d3d3d;
        }
        
        .dark .modal-content input,
        .dark .modal-content select {
            background-color: #2d2d2d;
            color: #ffffff;
            border-color: #3d3d3d;
        }
        
        .dark .modal-content label {
            color: #b0b0b0;
        }
        
        .dark .bg-gray-50 {
            background-color: #2d2d2d;
        }
        
        /* Keep dashboard overview title black in both themes */
        .dashboard-title {
            color: #000000;
        }
        
        .dark .dashboard-title {
            color: #ffffff;
        }

        /* Filter section styles for dark mode */
        .dark .filter-label {
            color: #b0b0b0;
        }
        
        .dark .filter-select {
            background-color: #2d2d2d;
            color: #ffffff;
            border-color: #3d3d3d;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            border-radius: 8px;
        }

        /* Animation styles */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .car-card, .package-card {
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
            transform-origin: center;
            transition: all 0.3s ease;
        }

        .car-card:hover, .package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .dark .car-card:hover, .dark .package-card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .car-image-container, .package-image-container {
            position: relative;
            overflow: hidden;
            border-radius: 8px 8px 0 0;
            height: 200px;
        }

        .car-image, .package-image {
            transition: transform 0.5s ease;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .car-card:hover .car-image, .package-card:hover .package-image {
            transform: scale(1.05);
        }

        .car-type-badge, .package-type-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Button styles */
        .edit-btn {
            background-color: #4f46e5;
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            background-color: #4338ca;
            transform: translateY(-2px);
        }

        .delete-btn {
            background-color: #ef4444;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        .dark .edit-btn {
            background-color: #6366f1;
        }

        .dark .edit-btn:hover {
            background-color: #4f46e5;
        }

        .dark .delete-btn {
            background-color: #f87171;
        }

        .dark .delete-btn:hover {
            background-color: #ef4444;
        }

        /* Staggered animation delay */
        .car-card:nth-child(1), .package-card:nth-child(1) { animation-delay: 0.1s; }
        .car-card:nth-child(2), .package-card:nth-child(2) { animation-delay: 0.2s; }
        .car-card:nth-child(3), .package-card:nth-child(3) { animation-delay: 0.3s; }
        .car-card:nth-child(4), .package-card:nth-child(4) { animation-delay: 0.4s; }
        .car-card:nth-child(5), .package-card:nth-child(5) { animation-delay: 0.5s; }
        .car-card:nth-child(6), .package-card:nth-child(6) { animation-delay: 0.6s; }
        .car-card:nth-child(7), .package-card:nth-child(7) { animation-delay: 0.7s; }
        .car-card:nth-child(8), .package-card:nth-child(8) { animation-delay: 0.8s; }
        .car-card:nth-child(9), .package-card:nth-child(9) { animation-delay: 0.9s; }
        .car-card:nth-child(10), .package-card:nth-child(10) { animation-delay: 1.0s; }
        .car-card:nth-child(11), .package-card:nth-child(11) { animation-delay: 1.1s; }
        .car-card:nth-child(12), .package-card:nth-child(12) { animation-delay: 1.2s; }
        .car-card:nth-child(13), .package-card:nth-child(13) { animation-delay: 1.3s; }
        .car-card:nth-child(14), .package-card:nth-child(14) { animation-delay: 1.4s; }
        .car-card:nth-child(15), .package-card:nth-child(15) { animation-delay: 1.5s; }
        .car-card:nth-child(16), .package-card:nth-child(16) { animation-delay: 1.6s; }
        .car-card:nth-child(17), .package-card:nth-child(17) { animation-delay: 1.7s; }
        .car-card:nth-child(18), .package-card:nth-child(18) { animation-delay: 1.8s; }
        .car-card:nth-child(19), .package-card:nth-child(19) { animation-delay: 1.9s; }
        .car-card:nth-child(20), .package-card:nth-child(20) { animation-delay: 2.0s; }

        /* Hidden car/package styles */
        .hidden-car, .hidden-package {
            opacity: 0.6;
            background-color: #f3f4f6;
            position: relative;
        }
        .hidden-car::after, .hidden-package::after {
            content: "HIDDEN";
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ef4444;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .dark .hidden-car, .dark .hidden-package {
            background-color: #2d2d2d;
        }

        /* Hide/show button */
        .hide-btn {
            background-color: #f59e0b;
            transition: all 0.3s ease;
        }
        .hide-btn:hover {
            background-color: #d97706;
            transform: translateY(-2px);
        }
        .dark .hide-btn {
            background-color: #fbbf24;
        }
        .dark .hide-btn:hover {
            background-color: #f59e0b;
        }
        .unhide-btn {
            background-color: #10b981;
            transition: all 0.3s ease;
        }
        .unhide-btn:hover {
            background-color: #059669;
            transform: translateY(-2px);
        }
        .dark .unhide-btn {
            background-color: #34d399;
        }
        .dark .unhide-btn:hover {
            background-color: #10b981;
        }

        /* Modal layout */
        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .modal-section {
            display: flex;
            flex-direction: column;
        }
        .modal-section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #4f46e5;
        }
        .dark .modal-section-title {
            color: #818cf8;
        }

        /* Tab styles */
        .tab-container {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }
        .dark .tab-container {
            border-bottom-color: #3d3d3d;
        }
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab:hover {
            color: #4f46e5;
        }
        .dark .tab:hover {
            color: #818cf8;
        }
        .tab.active {
            color: #4f46e5;
            border-bottom-color: #4f46e5;
        }
        .dark .tab.active {
            color: #818cf8;
            border-bottom-color: #818cf8;
        }

        /* Package type colors */
        .package-economy {
            background-color: #3b82f6;
            color: white;
        }
        .package-premium {
            background-color: #8b5cf6;
            color: white;
        }
        .package-luxury {
            background-color: #ec4899;
            color: white;
        }
        .dark .package-economy {
            background-color: #1d4ed8;
        }
        .dark .package-premium {
            background-color: #7c3aed;
        }
        .dark .package-luxury {
            background-color: #db2777;
        }

        /* Duration badge colors */
        .duration-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .duration-daily {
            background-color: #dbeafe;
            color: #1e40af;
        }
        .dark .duration-daily {
            background-color: #1e3a8a;
            color: #dbeafe;
        }
        .duration-weekly {
            background-color: #e0f2fe;
            color: #075985;
        }
        .dark .duration-weekly {
            background-color: #0c4a6e;
            color: #e0f2fe;
        }
        .duration-monthly {
            background-color: #ecfdf5;
            color: #047857;
        }
        .dark .duration-monthly {
            background-color: #064e3b;
            color: #ecfdf5;
        }
    </style>
</head>
<body class="bg-gray-100">
<div class="flex min-h-screen">
    <!-- Sidebar -->
    <div class="w-64 bg-white border-r">
        <div class="flex items-center justify-center h-16 border-b">
            <div class="text-2xl font-bold text-purple-600">
                Luxora
            </div>
        </div>
        <nav class="mt-10">
            <a class="flex items-center px-6 py-2 text-gray-600 hover:bg-gray-100" href="dashboard.html">
                <i class="fas fa-tachometer-alt mr-3"></i>
                Dashboard
            </a>
            <a class="flex items-center px-6 py-2 mt-4 text-gray-700 bg-gray-100" href="car-management.html">
                <i class="fas fa-car mr-3"></i>
                Car Management
            </a>
            <a class="flex items-center px-6 py-2 mt-4 text-gray-600 hover:bg-gray-100" href="transactions.html">
                <i class="fas fa-file-invoice-dollar mr-3"></i>
                Transactions
            </a>
            <a class="flex items-center px-6 py-2 mt-4 text-gray-600 hover:bg-gray-100" href="users.html">
                <i class="fas fa-users mr-3"></i>
                User Management
            </a>
            <a class="flex items-center px-6 py-2 mt-4 text-gray-600 hover:bg-gray-100" href="analytics.html">
                <i class="fas fa-chart-line mr-3"></i>
                Analytics
            </a>
            <div class="mt-10">
                
                <a class="flex items-center px-6 py-2 mt-4 text-red-600 hover:bg-gray-100" href="#">
                    <i class="fas fa-sign-out-alt mr-3"></i>
                    Logout
                </a>
            </div>
        </nav>
    </div>
    <!-- Main Content -->
    <div class="flex-1 p-6">
        <div class="flex justify-between items-center">
            <div class="flex items-center">
                <h1 class="text-2xl font-semibold dashboard-title mr-4">Car Management</h1>
                <div class="tab-container">
                    <div class="tab active" onclick="switchTab('cars')">Cars</div>
                    <div class="tab" onclick="switchTab('packages')">Packages</div>
                </div>
            </div>
            <div>
                <button id="addCarBtn" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all">
                    <i class="fas fa-plus mr-2"></i>
                    Add New Car
                </button>
                <button id="addPackageBtn" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all hidden">
                    <i class="fas fa-plus mr-2"></i>
                    Add New Package
                </button>
            </div>
        </div>
        
        <!-- Car Management Section -->
        <div id="cars-section">
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="filter" class="block text-gray-600 filter-label">Filter by Type:</label>
                    <select id="filter" class="mt-2 mb-4 p-2 border rounded w-full filter-select" onchange="filterCars()">
                        <option value="all">All Types</option>
                        <option value="sedan">Sedan</option>
                        <option value="suv">SUV</option>
                        <option value="hatchback">Hatchback</option>
                        <option value="premium">Premium</option>
                        <option value="luxury">Luxury</option>
                        <option value="electric">Electric</option>
                    </select>
                </div>
                <div>
                    <label for="locationFilter" class="block text-gray-600 filter-label">Filter by Location:</label>
                    <select id="locationFilter" class="mt-2 mb-4 p-2 border rounded w-full filter-select" onchange="filterCars()">
                        <option value="all">All Locations</option>
                        <option value="chennai">Chennai</option>
                        <option value="coimbatore">Coimbatore</option>
                        <option value="madurai">Madurai</option>
                        <option value="salem">Salem</option>
                        <option value="tiruchirappalli">Tiruchirappalli</option>
                        <option value="tirunelveli">Tirunelveli</option>
                    </select>
                </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="cars-container">
                <!-- Car cards will be dynamically inserted here -->
            </div>
        </div>
        
        <!-- Package Management Section -->
        <div id="packages-section" class="hidden">
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="packageTypeFilter" class="block text-gray-600 filter-label">Filter by Package Type:</label>
                    <select id="packageTypeFilter" class="mt-2 mb-4 p-2 border rounded w-full filter-select" onchange="filterPackages()">
                        <option value="all">All Types</option>
                        <option value="economy">Economy</option>
                        <option value="premium">Premium</option>
                        <option value="luxury">Luxury</option>
                    </select>
                </div>
                <div>
                    <label for="packageDurationFilter" class="block text-gray-600 filter-label">Filter by Duration:</label>
                    <select id="packageDurationFilter" class="mt-2 mb-4 p-2 border rounded w-full filter-select" onchange="filterPackages()">
                        <option value="all">All Durations</option>
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="packages-container">
                <!-- Package cards will be dynamically inserted here -->
            </div>
        </div>
    </div>
</div>

<!-- Add Car Modal -->
<div id="addCarModal" class="modal">
    <div class="modal-content">
        <span class="float-right text-gray-500 cursor-pointer hover:text-gray-700 dark:hover:text-gray-300" onclick="closeModal('addCarModal')">&times;</span>
        <h2 class="text-xl font-semibold mb-4">Add New Car</h2>
        <form id="addCarForm">
            <div class="modal-grid">
                <div class="modal-section">
                    <h3 class="modal-section-title">Basic Information</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Car Model</label>
                        <input type="text" id="carModel" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Price (₹)</label>
                        <input type="number" id="carPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Type</label>
                        <select id="carType" class="w-full p-2 border rounded" required>
                            <option value="sedan">Sedan</option>
                            <option value="suv">SUV</option>
                            <option value="hatchback">Hatchback</option>
                            <option value="premium">Premium</option>
                            <option value="luxury">Luxury</option>
                            <option value="electric">Electric</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Seats</label>
                        <input type="number" id="carSeats" class="w-full p-2 border rounded" required min="2" max="10">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Mileage (km/l)</label>
                        <input type="number" id="carMileage" class="w-full p-2 border rounded" required>
                    </div>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">Additional Details</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Transmission</label>
                        <select id="carTransmission" class="w-full p-2 border rounded" required>
                            <option value="automatic">Automatic</option>
                            <option value="manual">Manual</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">City</label>
                        <select id="carCity" class="w-full p-2 border rounded" required>
                            <option value="chennai">Chennai</option>
                            <option value="coimbatore">Coimbatore</option>
                            <option value="madurai">Madurai</option>
                            <option value="salem">Salem</option>
                            <option value="tiruchirappalli">Tiruchirappalli</option>
                            <option value="tirunelveli">Tirunelveli</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Area</label>
                        <input type="text" id="carArea" class="w-full p-2 border rounded" required placeholder="e.g., New Bus Stand">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Image URL</label>
                        <input type="text" id="carImage" class="w-full p-2 border rounded" required>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button type="button" class="px-4 py-2 text-gray-600 mr-2 hover:bg-gray-100 rounded-lg transition-all" onclick="closeModal('addCarModal')">Cancel</button>
                <button type="submit" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all">Add Car</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Car Modal -->
<div id="editCarModal" class="modal">
    <div class="modal-content">
        <span class="float-right text-gray-500 cursor-pointer hover:text-gray-700 dark:hover:text-gray-300" onclick="closeModal('editCarModal')">&times;</span>
        <h2 class="text-xl font-semibold mb-4">Edit Car</h2>
        <form id="editCarForm">
            <input type="hidden" id="editCarId">
            <div class="modal-grid">
                <div class="modal-section">
                    <h3 class="modal-section-title">Basic Information</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Car Model</label>
                        <input type="text" id="editCarModel" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Price (₹)</label>
                        <input type="number" id="editCarPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Type</label>
                        <select id="editCarType" class="w-full p-2 border rounded" required>
                            <option value="sedan">Sedan</option>
                            <option value="suv">SUV</option>
                            <option value="hatchback">Hatchback</option>
                            <option value="premium">Premium</option>
                            <option value="luxury">Luxury</option>
                            <option value="electric">Electric</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Seats</label>
                        <input type="number" id="editCarSeats" class="w-full p-2 border rounded" required min="2" max="10">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Mileage (km/l)</label>
                        <input type="number" id="editCarMileage" class="w-full p-2 border rounded" required>
                    </div>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">Additional Details</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Transmission</label>
                        <select id="editCarTransmission" class="w-full p-2 border rounded" required>
                            <option value="automatic">Automatic</option>
                            <option value="manual">Manual</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">City</label>
                        <select id="editCarCity" class="w-full p-2 border rounded" required>
                            <option value="chennai">Chennai</option>
                            <option value="coimbatore">Coimbatore</option>
                            <option value="madurai">Madurai</option>
                            <option value="salem">Salem</option>
                            <option value="tiruchirappalli">Tiruchirappalli</option>
                            <option value="tirunelveli">Tirunelveli</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Area</label>
                        <input type="text" id="editCarArea" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Image URL</label>
                        <input type="text" id="editCarImage" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Status</label>
                        <div class="flex items-center">
                            <input type="checkbox" id="editCarHidden" class="mr-2">
                            <label for="editCarHidden">Hide this car</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button type="button" class="px-4 py-2 text-gray-600 mr-2 hover:bg-gray-100 rounded-lg transition-all" onclick="closeModal('editCarModal')">Cancel</button>
                <button type="submit" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<!-- Add Package Modal -->
<div id="addPackageModal" class="modal">
    <div class="modal-content">
        <span class="float-right text-gray-500 cursor-pointer hover:text-gray-700 dark:hover:text-gray-300" onclick="closeModal('addPackageModal')">&times;</span>
        <h2 class="text-xl font-semibold mb-4">Add New Package</h2>
        <form id="addPackageForm">
            <div class="modal-grid">
                <div class="modal-section">
                    <h3 class="modal-section-title">Package Information</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Package Name</label>
                        <input type="text" id="packageName" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Package Type</label>
                        <select id="packageType" class="w-full p-2 border rounded" required>
                            <option value="economy">Economy</option>
                            <option value="premium">Premium</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Description</label>
                        <textarea id="packageDescription" class="w-full p-2 border rounded" rows="3" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Image URL</label>
                        <input type="text" id="packageImage" class="w-full p-2 border rounded" required>
                    </div>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">Pricing & Duration</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Daily Price (₹)</label>
                        <input type="number" id="packageDailyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Weekly Price (₹)</label>
                        <input type="number" id="packageWeeklyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Monthly Price (₹)</label>
                        <input type="number" id="packageMonthlyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Included Cars</label>
                        <select id="packageCars" class="w-full p-2 border rounded" multiple>
                            <!-- Cars will be populated here -->
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple cars</p>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Features</label>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input type="checkbox" id="featureInsurance" class="mr-2">
                                <label for="featureInsurance">Insurance Included</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="featureMaintenance" class="mr-2">
                                <label for="featureMaintenance">Free Maintenance</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="featureRoadside" class="mr-2">
                                <label for="featureRoadside">24/7 Roadside Assistance</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="featureDelivery" class="mr-2">
                                <label for="featureDelivery">Free Delivery</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button type="button" class="px-4 py-2 text-gray-600 mr-2 hover:bg-gray-100 rounded-lg transition-all" onclick="closeModal('addPackageModal')">Cancel</button>
                <button type="submit" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all">Add Package</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Package Modal -->
<div id="editPackageModal" class="modal">
    <div class="modal-content">
        <span class="float-right text-gray-500 cursor-pointer hover:text-gray-700 dark:hover:text-gray-300" onclick="closeModal('editPackageModal')">&times;</span>
        <h2 class="text-xl font-semibold mb-4">Edit Package</h2>
        <form id="editPackageForm">
            <input type="hidden" id="editPackageId">
            <div class="modal-grid">
                <div class="modal-section">
                    <h3 class="modal-section-title">Package Information</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Package Name</label>
                        <input type="text" id="editPackageName" class="w-full p-2 border rounded" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Package Type</label>
                        <select id="editPackageType" class="w-full p-2 border rounded" required>
                            <option value="economy">Economy</option>
                            <option value="premium">Premium</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Description</label>
                        <textarea id="editPackageDescription" class="w-full p-2 border rounded" rows="3" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Image URL</label>
                        <input type="text" id="editPackageImage" class="w-full p-2 border rounded" required>
                    </div>
                </div>
                <div class="modal-section">
                    <h3 class="modal-section-title">Pricing & Duration</h3>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Daily Price (₹)</label>
                        <input type="number" id="editPackageDailyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Weekly Price (₹)</label>
                        <input type="number" id="editPackageWeeklyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Monthly Price (₹)</label>
                        <input type="number" id="editPackageMonthlyPrice" class="w-full p-2 border rounded" required min="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Included Cars</label>
                        <select id="editPackageCars" class="w-full p-2 border rounded" multiple>
                            <!-- Cars will be populated here -->
                        </select>
                        <p class="text-sm text-gray-500 mt-1">Hold Ctrl/Cmd to select multiple cars</p>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Features</label>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input type="checkbox" id="editFeatureInsurance" class="mr-2">
                                <label for="editFeatureInsurance">Insurance Included</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="editFeatureMaintenance" class="mr-2">
                                <label for="editFeatureMaintenance">Free Maintenance</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="editFeatureRoadside" class="mr-2">
                                <label for="editFeatureRoadside">24/7 Roadside Assistance</label>
                            </div>
                            <div class="flex items-center">
                                <input type="checkbox" id="editFeatureDelivery" class="mr-2">
                                <label for="editFeatureDelivery">Free Delivery</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-600 mb-2">Status</label>
                        <div class="flex items-center">
                            <input type="checkbox" id="editPackageHidden" class="mr-2">
                            <label for="editPackageHidden">Hide this package</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex justify-end mt-6">
                <button type="button" class="px-4 py-2 text-gray-600 mr-2 hover:bg-gray-100 rounded-lg transition-all" onclick="closeModal('editPackageModal')">Cancel</button>
                <button type="submit" class="px-4 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-all">Save Changes</button>
            </div>
        </form>
    </div>
</div>

<script>
    // Sample car data with seats and location
    let cars = [
        {
            id: 1,
            model: "Hyundai Creta",
            price: 2500,
            type: "suv",
            seats: 5,
            mileage: 15,
            transmission: "automatic",
            city: "chennai",
            area: "Anna Nagar",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/130591/fronx-exterior-right-front-three-quarter-109.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 2,
            model: "Mahindra XUV700",
            price: 3000,
            type: "suv",
            seats: 7,
            mileage: 14,
            transmission: "manual",
            city: "coimbatore",
            area: "Gandhipuram",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40432/scorpio-n-exterior-right-front-three-quarter-75.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 3,
            model: "Maruti Suzuki Swift",
            price: 1800,
            type: "hatchback",
            seats: 5,
            mileage: 22,
            transmission: "manual",
            city: "madurai",
            area: "Tallakulam",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/110815/swift-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 4,
            model: "Honda City",
            price: 2200,
            type: "sedan",
            seats: 5,
            mileage: 18,
            transmission: "automatic",
            city: "salem",
            area: "New Bus Stand",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/54349/city-exterior-right-front-three-quarter-148156.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 5,
            model: "Tata Nexon",
            price: 2300,
            type: "suv",
            seats: 5,
            mileage: 17,
            transmission: "automatic",
            city: "tiruchirappalli",
            area: "Bharathidasan Road",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/141867/nexon-exterior-right-front-three-quarter-8.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 6,
            model: "Toyota Fortuner",
            price: 4500,
            type: "premium",
            seats: 7,
            mileage: 12,
            transmission: "automatic",
            city: "tirunelveli",
            area: "Palayamkottai",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/161815/fortuner-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 7,
            model: "Kia Seltos",
            price: 2600,
            type: "suv",
            seats: 5,
            mileage: 16,
            transmission: "automatic",
            city: "chennai",
            area: "T Nagar",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/45242/seltos-exterior-right-front-three-quarter-148154.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 8,
            model: "Hyundai i20",
            price: 1900,
            type: "hatchback",
            seats: 5,
            mileage: 20,
            transmission: "manual",
            city: "coimbatore",
            area: "RS Puram",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/110823/i20-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 9,
            model: "Tata Altroz",
            price: 2000,
            type: "hatchback",
            seats: 5,
            mileage: 19,
            transmission: "manual",
            city: "madurai",
            area: "Koodal Nagar",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40445/altroz-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 10,
            model: "Toyota Innova Crysta",
            price: 3500,
            type: "premium",
            seats: 7,
            mileage: 13,
            transmission: "automatic",
            city: "salem",
            area: "Four Roads",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40474/innova-crysta-exterior-right-front-three-quarter-77.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 11,
            model: "MG Hector",
            price: 2800,
            type: "suv",
            seats: 5,
            mileage: 14,
            transmission: "automatic",
            city: "tiruchirappalli",
            area: "Woraiyur",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40415/hector-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 12,
            model: "Maruti Suzuki Baleno",
            price: 1850,
            type: "hatchback",
            seats: 5,
            mileage: 21,
            transmission: "manual",
            city: "tirunelveli",
            area: "Melapalayam",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/45270/baleno-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 13,
            model: "Honda Amaze",
            price: 2100,
            type: "sedan",
            seats: 5,
            mileage: 18,
            transmission: "manual",
            city: "chennai",
            area: "Adyar",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40401/amaze-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 14,
            model: "Hyundai Verna",
            price: 2400,
            type: "sedan",
            seats: 5,
            mileage: 17,
            transmission: "automatic",
            city: "coimbatore",
            area: "Saravanampatti",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/54351/verna-exterior-right-front-three-quarter-148155.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 15,
            model: "Skoda Slavia",
            price: 2700,
            type: "sedan",
            seats: 5,
            mileage: 16,
            transmission: "automatic",
            city: "madurai",
            area: "Villapuram",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/117183/slavia-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 16,
            model: "Toyota Glanza",
            price: 1950,
            type: "hatchback",
            seats: 5,
            mileage: 20,
            transmission: "manual",
            city: "salem",
            area: "Fairlands",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40478/glanza-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 17,
            model: "Mahindra Thar",
            price: 3200,
            type: "suv",
            seats: 4,
            mileage: 15,
            transmission: "manual",
            city: "tiruchirappalli",
            area: "Srirangam",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40433/thar-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 18,
            model: "Tata Punch",
            price: 2050,
            type: "suv",
            seats: 5,
            mileage: 18,
            transmission: "manual",
            city: "tirunelveli",
            area: "Thachanallur",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/117185/punch-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 19,
            model: "Kia Carens",
            price: 2900,
            type: "suv",
            seats: 7,
            mileage: 16,
            transmission: "automatic",
            city: "chennai",
            area: "Velachery",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/117181/carens-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 20,
            model: "Volkswagen Taigun",
            price: 2650,
            type: "suv",
            seats: 5,
            mileage: 17,
            transmission: "automatic",
            city: "coimbatore",
            area: "Peelamedu",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/117187/taigun-exterior-right-front-three-quarter-3.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 21,
            model: "BMW 3 Series",
            price: 7500,
            type: "luxury",
            seats: 5,
            mileage: 14,
            transmission: "automatic",
            city: "chennai",
            area: "Nungambakkam",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40412/3-series-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 22,
            model: "Mercedes-Benz C-Class",
            price: 8000,
            type: "luxury",
            seats: 5,
            mileage: 13,
            transmission: "automatic",
            city: "coimbatore",
            area: "Race Course",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40419/c-class-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 23,
            model: "Audi A4",
            price: 7800,
            type: "luxury",
            seats: 5,
            mileage: 14,
            transmission: "automatic",
            city: "chennai",
            area: "Alwarpet",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40404/a4-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 24,
            model: "Tata Tigor EV",
            price: 3100,
            type: "electric",
            seats: 5,
            mileage: 315, // km per charge
            transmission: "automatic",
            city: "madurai",
            area: "K.K. Nagar",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40447/tigor-ev-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        },
        {
            id: 25,
            model: "MG ZS EV",
            price: 3800,
            type: "electric",
            seats: 5,
            mileage: 419, // km per charge
            transmission: "automatic",
            city: "salem",
            area: "Hasthampatti",
            image: "https://imgd.aeplcdn.com/664x374/n/cw/ec/40416/zs-ev-exterior-right-front-three-quarter-2.jpeg?isig=0&q=80",
            hidden: false
        }
    ];

    // Sample package data
    let packages = [
        {
            id: 1,
            name: "City Explorer",
            type: "economy",
            description: "Perfect for city commuting with fuel-efficient cars",
            image: "https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            dailyPrice: 1500,
            weeklyPrice: 8500,
            monthlyPrice: 30000,
            includedCars: [1, 3, 8, 12, 16],
            features: {
                insurance: true,
                maintenance: false,
                roadside: true,
                delivery: false
            },
            hidden: false
        },
        {
            id: 2,
            name: "Family Adventure",
            type: "premium",
            description: "Spacious SUVs for family trips and adventures",
            image: "https://images.unsplash.com/photo-1503376780353-7e6692767b70?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            dailyPrice: 3000,
            weeklyPrice: 18000,
            monthlyPrice: 65000,
            includedCars: [2, 5, 7, 11, 19],
            features: {
                insurance: true,
                maintenance: true,
                roadside: true,
                delivery: true
            },
            hidden: false
        },
        {
            id: 3,
            name: "Executive Comfort",
            type: "luxury",
            description: "Premium luxury vehicles for business and comfort",
            image: "https://images.unsplash.com/photo-1493238792000-8113da705763?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            dailyPrice: 7000,
            weeklyPrice: 40000,
            monthlyPrice: 150000,
            includedCars: [21, 22, 23],
            features: {
                insurance: true,
                maintenance: true,
                roadside: true,
                delivery: true
            },
            hidden: false
        },
        {
            id: 4,
            name: "Eco-Friendly",
            type: "economy",
            description: "Electric vehicles for environmentally conscious customers",
            image: "https://images.unsplash.com/photo-1554744512-d6c603f27c54?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            dailyPrice: 2500,
            weeklyPrice: 14000,
            monthlyPrice: 50000,
            includedCars: [24, 25],
            features: {
                insurance: true,
                maintenance: false,
                roadside: true,
                delivery: false
            },
            hidden: false
        },
        {
            id: 5,
            name: "Weekend Getaway",
            type: "premium",
            description: "Premium vehicles for your weekend trips",
            image: "https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",
            dailyPrice: 3500,
            weeklyPrice: 20000,
            monthlyPrice: 75000,
            includedCars: [6, 10, 17, 20],
            features: {
                insurance: true,
                maintenance: true,
                roadside: true,
                delivery: true
            },
            hidden: false
        }
    ];

    // City names mapping for display
    const cityNames = {
        "chennai": "Chennai",
        "coimbatore": "Coimbatore",
        "madurai": "Madurai",
        "salem": "Salem",
        "tiruchirappalli": "Tiruchirappalli",
        "tirunelveli": "Tirunelveli"
    };

    // Type colors mapping
    const typeColors = {
        "sedan": "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",
        "suv": "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",
        "hatchback": "bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",
        "premium": "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",
        "luxury": "bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",
        "electric": "bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"
    };

    // Package type colors
    const packageTypeColors = {
        "economy": "package-economy",
        "premium": "package-premium",
        "luxury": "package-luxury"
    };

    // Check for saved theme preference or use preferred color scheme
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    const currentTheme = localStorage.getItem('theme');
    
    if (currentTheme === 'dark' || (!currentTheme && prefersDarkScheme.matches)) {
        document.body.classList.add('dark');
    }

    // Initialize the page with all cars
    document.addEventListener('DOMContentLoaded', function() {
        renderCars(cars);
        renderPackages(packages);
        
        // Set up event listeners for add buttons
        document.getElementById('addCarBtn').addEventListener('click', openAddModal);
        document.getElementById('addPackageBtn').addEventListener('click', openAddPackageModal);
        
        // Add scroll animation trigger
        const carContainer = document.getElementById('cars-container');
        const packageContainer = document.getElementById('packages-container');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, { threshold: 0.1 });

        // Observe all car and package cards
        document.querySelectorAll('.car-card, .package-card').forEach(card => {
            observer.observe(card);
        });
    });

    // Switch between cars and packages tabs
    function switchTab(tab) {
        if (tab === 'cars') {
            document.getElementById('cars-section').classList.remove('hidden');
            document.getElementById('packages-section').classList.add('hidden');
            document.getElementById('addCarBtn').classList.remove('hidden');
            document.getElementById('addPackageBtn').classList.add('hidden');
            
            // Update tab styling
            document.querySelectorAll('.tab').forEach(t => {
                if (t.textContent === 'Cars') {
                    t.classList.add('active');
                } else {
                    t.classList.remove('active');
                }
            });
        } else if (tab === 'packages') {
            document.getElementById('cars-section').classList.add('hidden');
            document.getElementById('packages-section').classList.remove('hidden');
            document.getElementById('addCarBtn').classList.add('hidden');
            document.getElementById('addPackageBtn').classList.remove('hidden');
            
            // Update tab styling
            document.querySelectorAll('.tab').forEach(t => {
                if (t.textContent === 'Packages') {
                    t.classList.add('active');
                } else {
                    t.classList.remove('active');
                }
            });
        }
    }

    // Render cars to the page
    function renderCars(carsToRender) {
        const container = document.getElementById('cars-container');
        container.innerHTML = '';
        
        if (carsToRender.length === 0) {
            container.innerHTML = '<p class="text-gray-600 col-span-3 text-center py-10 dark:text-gray-300">No cars found matching your filters.</p>';
            return;
        }
        
        carsToRender.forEach((car, index) => {
            const carCard = document.createElement('div');
            carCard.className = `car-card bg-white p-0 rounded-lg shadow hover:shadow-lg transition-all ${car.hidden ? 'hidden-car' : ''}`;
            
            carCard.innerHTML = `
                <div class="car-image-container">
                    <img src="${car.image}" alt="${car.model}" class="car-image">
                    <span class="car-type-badge ${typeColors[car.type]}">${capitalizeFirstLetter(car.type)}</span>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h2 class="text-xl font-semibold">${car.model}</h2>
                        <p class="text-lg font-bold text-purple-600 dark:text-purple-400">₹${car.price.toLocaleString()}</p>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <div class="flex items-center">
                            <i class="fas fa-users mr-2 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-600 dark:text-gray-300">${car.seats} Seats</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-tachometer-alt mr-2 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-600 dark:text-gray-300">${car.mileage} ${car.type === 'electric' ? 'km/charge' : 'km/l'}</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-cog mr-2 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-600 dark:text-gray-300">${capitalizeFirstLetter(car.transmission)}</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt mr-2 text-gray-500 dark:text-gray-400"></i>
                            <span class="text-gray-600 dark:text-gray-300">${cityNames[car.city]}</span>
                        </div>
                    </div>
                    <div class="mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <p class="text-sm font-medium text-gray-700 dark:text-gray-300">Available at:</p>
                        <p class="text-sm text-gray-600 dark:text-gray-200">${car.area}</p>
                    </div>
                    <div class="mt-4 flex justify-between space-x-3">
                        <button class="edit-btn px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center ${car.hidden ? 'opacity-50 cursor-not-allowed' : ''}" 
                                ${car.hidden ? 'disabled' : ''} onclick="${car.hidden ? '' : `openEditModal(${car.id})`}">
                            <i class="fas fa-edit mr-2"></i>
                            Edit
                        </button>
                        <button class="${car.hidden ? 'unhide-btn' : 'hide-btn'} px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center" 
                                onclick="toggleCarVisibility(${car.id})">
                            <i class="fas ${car.hidden ? 'fa-eye' : 'fa-eye-slash'} mr-2"></i>
                            ${car.hidden ? 'Unhide' : 'Hide'}
                        </button>
                        <button class="delete-btn px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center">
                            <i class="fas fa-trash mr-2"></i>
                            Delete
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners to the buttons
            carCard.querySelector('.delete-btn').addEventListener('click', () => deleteCar(car.id));
            
            container.appendChild(carCard);
        });

        // Reinitialize intersection observers for new cards
        setTimeout(() => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.car-card').forEach(card => {
                observer.observe(card);
            });
        }, 50);
    }

    // Render packages to the page
    function renderPackages(packagesToRender) {
        const container = document.getElementById('packages-container');
        container.innerHTML = '';
        
        if (packagesToRender.length === 0) {
            container.innerHTML = '<p class="text-gray-600 col-span-3 text-center py-10 dark:text-gray-300">No packages found matching your filters.</p>';
            return;
        }
        
        packagesToRender.forEach((pkg, index) => {
            const packageCard = document.createElement('div');
            packageCard.className = `package-card bg-white p-0 rounded-lg shadow hover:shadow-lg transition-all ${pkg.hidden ? 'hidden-package' : ''}`;
            
            // Get included car models
            const includedCarModels = cars.filter(car => pkg.includedCars.includes(car.id)).map(car => car.model).join(', ');
            
            packageCard.innerHTML = `
                <div class="package-image-container">
                    <img src="${pkg.image}" alt="${pkg.name}" class="package-image">
                    <span class="package-type-badge ${packageTypeColors[pkg.type]}">${capitalizeFirstLetter(pkg.type)}</span>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <h2 class="text-xl font-semibold">${pkg.name}</h2>
                        <div>
                            <span class="duration-badge duration-daily">Daily: ₹${pkg.dailyPrice.toLocaleString()}</span>
                            <span class="duration-badge duration-weekly">Weekly: ₹${pkg.weeklyPrice.toLocaleString()}</span>
                            <span class="duration-badge duration-monthly">Monthly: ₹${pkg.monthlyPrice.toLocaleString()}</span>
                        </div>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-3">${pkg.description}</p>
                    
                    <div class="mb-3">
                        <p class="text-sm font-medium text-gray-700 dark:text-gray-300">Included Cars:</p>
                        <p class="text-sm text-gray-600 dark:text-gray-200 truncate" title="${includedCarModels}">${includedCarModels}</p>
                    </div>
                    
                    <div class="mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <p class="text-sm font-medium text-gray-700 dark:text-gray-300">Features:</p>
                        <ul class="text-sm text-gray-600 dark:text-gray-200 list-disc list-inside">
                            ${pkg.features.insurance ? '<li>Insurance Included</li>' : ''}
                            ${pkg.features.maintenance ? '<li>Free Maintenance</li>' : ''}
                            ${pkg.features.roadside ? '<li>24/7 Roadside Assistance</li>' : ''}
                            ${pkg.features.delivery ? '<li>Free Delivery</li>' : ''}
                        </ul>
                    </div>
                    
                    <div class="mt-4 flex justify-between space-x-3">
                        <button class="edit-btn px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center ${pkg.hidden ? 'opacity-50 cursor-not-allowed' : ''}" 
                                ${pkg.hidden ? 'disabled' : ''} onclick="${pkg.hidden ? '' : `openEditPackageModal(${pkg.id})`}">
                            <i class="fas fa-edit mr-2"></i>
                            Edit
                        </button>
                        <button class="${pkg.hidden ? 'unhide-btn' : 'hide-btn'} px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center" 
                                onclick="togglePackageVisibility(${pkg.id})">
                            <i class="fas ${pkg.hidden ? 'fa-eye' : 'fa-eye-slash'} mr-2"></i>
                            ${pkg.hidden ? 'Unhide' : 'Hide'}
                        </button>
                        <button class="delete-btn px-4 py-2 text-white rounded-lg flex-1 flex items-center justify-center">
                            <i class="fas fa-trash mr-2"></i>
                            Delete
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners to the buttons
            packageCard.querySelector('.delete-btn').addEventListener('click', () => deletePackage(pkg.id));
            
            container.appendChild(packageCard);
        });

        // Reinitialize intersection observers for new cards
        setTimeout(() => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.package-card').forEach(card => {
                observer.observe(card);
            });
        }, 50);
    }

    // Filter cars by type and location
    function filterCars() {
        const typeFilterValue = document.getElementById('filter').value;
        const locationFilterValue = document.getElementById('locationFilter').value;
        
        let filteredCars = cars;
        
        if (typeFilterValue !== 'all') {
            filteredCars = filteredCars.filter(car => car.type === typeFilterValue);
        }
        
        if (locationFilterValue !== 'all') {
            filteredCars = filteredCars.filter(car => car.city === locationFilterValue);
        }
        
        renderCars(filteredCars);
    }

    // Filter packages by type and duration
    function filterPackages() {
        const typeFilterValue = document.getElementById('packageTypeFilter').value;
        const durationFilterValue = document.getElementById('packageDurationFilter').value;
        
        let filteredPackages = packages;
        
        if (typeFilterValue !== 'all') {
            filteredPackages = filteredPackages.filter(pkg => pkg.type === typeFilterValue);
        }
        
        if (durationFilterValue !== 'all') {
            // We can add specific duration filtering logic here if needed
            // Currently just filtering by type
        }
        
        renderPackages(filteredPackages);
    }

    // Open Add Car Modal
    function openAddModal() {
        document.getElementById('addCarModal').style.display = 'block';
    }

    // Open Add Package Modal
    function openAddPackageModal() {
        // Populate cars dropdown
        const carsSelect = document.getElementById('packageCars');
        carsSelect.innerHTML = '';
        cars.forEach(car => {
            if (!car.hidden) {
                const option = document.createElement('option');
                option.value = car.id;
                option.textContent = `${car.model} (${capitalizeFirstLetter(car.type)})`;
                carsSelect.appendChild(option);
            }
        });
        
        document.getElementById('addPackageModal').style.display = 'block';
    }

    // Open Edit Car Modal
    function openEditModal(carId) {
        const car = cars.find(c => c.id === carId);
        if (car) {
            document.getElementById('editCarId').value = car.id;
            document.getElementById('editCarModel').value = car.model;
            document.getElementById('editCarPrice').value = car.price;
            document.getElementById('editCarType').value = car.type;
            document.getElementById('editCarSeats').value = car.seats;
            document.getElementById('editCarMileage').value = car.mileage;
            document.getElementById('editCarTransmission').value = car.transmission;
            document.getElementById('editCarCity').value = car.city;
            document.getElementById('editCarArea').value = car.area;
            document.getElementById('editCarImage').value = car.image;
            document.getElementById('editCarHidden').checked = car.hidden;
            document.getElementById('editCarModal').style.display = 'block';
        }
    }

    // Open Edit Package Modal
    function openEditPackageModal(packageId) {
        const pkg = packages.find(p => p.id === packageId);
        if (pkg) {
            // Populate cars dropdown
            const carsSelect = document.getElementById('editPackageCars');
            carsSelect.innerHTML = '';
            cars.forEach(car => {
                if (!car.hidden) {
                    const option = document.createElement('option');
                    option.value = car.id;
                    option.textContent = `${car.model} (${capitalizeFirstLetter(car.type)})`;
                    option.selected = pkg.includedCars.includes(car.id);
                    carsSelect.appendChild(option);
                }
            });
            
            document.getElementById('editPackageId').value = pkg.id;
            document.getElementById('editPackageName').value = pkg.name;
            document.getElementById('editPackageType').value = pkg.type;
            document.getElementById('editPackageDescription').value = pkg.description;
            document.getElementById('editPackageImage').value = pkg.image;
            document.getElementById('editPackageDailyPrice').value = pkg.dailyPrice;
            document.getElementById('editPackageWeeklyPrice').value = pkg.weeklyPrice;
            document.getElementById('editPackageMonthlyPrice').value = pkg.monthlyPrice;
            document.getElementById('editFeatureInsurance').checked = pkg.features.insurance;
            document.getElementById('editFeatureMaintenance').checked = pkg.features.maintenance;
            document.getElementById('editFeatureRoadside').checked = pkg.features.roadside;
            document.getElementById('editFeatureDelivery').checked = pkg.features.delivery;
            document.getElementById('editPackageHidden').checked = pkg.hidden;
            document.getElementById('editPackageModal').style.display = 'block';
        }
    }

    // Close any modal
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
    }

    // Add new car
    document.getElementById('addCarForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const newCar = {
            id: cars.length > 0 ? Math.max(...cars.map(c => c.id)) + 1 : 1,
            model: document.getElementById('carModel').value,
            price: parseInt(document.getElementById('carPrice').value),
            type: document.getElementById('carType').value,
            seats: parseInt(document.getElementById('carSeats').value),
            mileage: parseInt(document.getElementById('carMileage').value),
            transmission: document.getElementById('carTransmission').value,
            city: document.getElementById('carCity').value,
            area: document.getElementById('carArea').value,
            image: document.getElementById('carImage').value,
            hidden: false
        };
        
        cars.push(newCar);
        renderCars(cars);
        closeModal('addCarModal');
        this.reset();
    });

    // Add new package
    document.getElementById('addPackageForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get selected cars
        const selectedCars = Array.from(document.getElementById('packageCars').selectedOptions).map(option => parseInt(option.value));
        
        const newPackage = {
            id: packages.length > 0 ? Math.max(...packages.map(p => p.id)) + 1 : 1,
            name: document.getElementById('packageName').value,
            type: document.getElementById('packageType').value,
            description: document.getElementById('packageDescription').value,
            image: document.getElementById('packageImage').value,
            dailyPrice: parseInt(document.getElementById('packageDailyPrice').value),
            weeklyPrice: parseInt(document.getElementById('packageWeeklyPrice').value),
            monthlyPrice: parseInt(document.getElementById('packageMonthlyPrice').value),
            includedCars: selectedCars,
            features: {
                insurance: document.getElementById('featureInsurance').checked,
                maintenance: document.getElementById('featureMaintenance').checked,
                roadside: document.getElementById('featureRoadside').checked,
                delivery: document.getElementById('featureDelivery').checked
            },
            hidden: false
        };
        
        packages.push(newPackage);
        renderPackages(packages);
        closeModal('addPackageModal');
        this.reset();
    });

    // Edit existing car
    document.getElementById('editCarForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const carId = parseInt(document.getElementById('editCarId').value);
        const carIndex = cars.findIndex(c => c.id === carId);
        
        if (carIndex !== -1) {
            cars[carIndex] = {
                id: carId,
                model: document.getElementById('editCarModel').value,
                price: parseInt(document.getElementById('editCarPrice').value),
                type: document.getElementById('editCarType').value,
                seats: parseInt(document.getElementById('editCarSeats').value),
                mileage: parseInt(document.getElementById('editCarMileage').value),
                transmission: document.getElementById('editCarTransmission').value,
                city: document.getElementById('editCarCity').value,
                area: document.getElementById('editCarArea').value,
                image: document.getElementById('editCarImage').value,
                hidden: document.getElementById('editCarHidden').checked
            };
            
            renderCars(cars);
            closeModal('editCarModal');
        }
    });

    // Edit existing package
    document.getElementById('editPackageForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const packageId = parseInt(document.getElementById('editPackageId').value);
        const packageIndex = packages.findIndex(p => p.id === packageId);
        
        if (packageIndex !== -1) {
            // Get selected cars
            const selectedCars = Array.from(document.getElementById('editPackageCars').selectedOptions).map(option => parseInt(option.value));
            
            packages[packageIndex] = {
                id: packageId,
                name: document.getElementById('editPackageName').value,
                type: document.getElementById('editPackageType').value,
                description: document.getElementById('editPackageDescription').value,
                image: document.getElementById('editPackageImage').value,
                dailyPrice: parseInt(document.getElementById('editPackageDailyPrice').value),
                weeklyPrice: parseInt(document.getElementById('editPackageWeeklyPrice').value),
                monthlyPrice: parseInt(document.getElementById('editPackageMonthlyPrice').value),
                includedCars: selectedCars,
                features: {
                    insurance: document.getElementById('editFeatureInsurance').checked,
                    maintenance: document.getElementById('editFeatureMaintenance').checked,
                    roadside: document.getElementById('editFeatureRoadside').checked,
                    delivery: document.getElementById('editFeatureDelivery').checked
                },
                hidden: document.getElementById('editPackageHidden').checked
            };
            
            renderPackages(packages);
            closeModal('editPackageModal');
        }
    });

    // Delete car
    function deleteCar(carId) {
        if (confirm("Are you sure you want to delete this car?")) {
            // Remove this car from any packages that include it
            packages.forEach(pkg => {
                pkg.includedCars = pkg.includedCars.filter(id => id !== carId);
            });
            
            cars = cars.filter(car => car.id !== carId);
            renderCars(cars);
            renderPackages(packages);
        }
    }

    // Delete package
    function deletePackage(packageId) {
        if (confirm("Are you sure you want to delete this package?")) {
            packages = packages.filter(pkg => pkg.id !== packageId);
            renderPackages(packages);
        }
    }

    // Toggle car visibility
    function toggleCarVisibility(carId) {
        const carIndex = cars.findIndex(c => c.id === carId);
        if (carIndex !== -1) {
            cars[carIndex].hidden = !cars[carIndex].hidden;
            renderCars(cars);
            
            // If hiding a car, remove it from any packages
            if (cars[carIndex].hidden) {
                packages.forEach(pkg => {
                    pkg.includedCars = pkg.includedCars.filter(id => id !== carId);
                });
                renderPackages(packages);
            }
        }
    }

    // Toggle package visibility
    function togglePackageVisibility(packageId) {
        const packageIndex = packages.findIndex(p => p.id === packageId);
        if (packageIndex !== -1) {
            packages[packageIndex].hidden = !packages[packageIndex].hidden;
            renderPackages(packages);
        }
    }

    // Helper function to capitalize first letter
    function capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }
</script>
</body>
</html>